{"ast":null,"code":"/**\n * Modules in this bundle\n * @license\n *\n * modal-video:\n *   license: appleple\n *   author: appleple\n *   homepage: http://developer.a-blogcms.jp\n *   version: 2.4.1\n *\n * custom-event-polyfill:\n *   license: MIT (http://opensource.org/licenses/MIT)\n *   maintainers: krambuhl <evan.krambuhl@gmail.com>\n *   contributors: Frank Panetta, Mikhail Reenko <reenko@yandex.ru>, Joscha Feth <joscha@feth.com>\n *   homepage: https://github.com/krambuhl/custom-event-polyfill#readme\n *   version: 0.3.0\n *\n * es6-object-assign:\n *   license: MIT (http://opensource.org/licenses/MIT)\n *   author: Rub√©n Norte <rubennorte@gmail.com>\n *   homepage: https://github.com/rubennorte/es6-object-assign\n *   version: 1.1.0\n *\n * This header is generated by licensify (https://github.com/twada/licensify)\n */\n(function e(t, n, r) {\n  function s(o, u) {\n    if (!n[o]) {\n      if (!t[o]) {\n        var a = typeof require == \"function\" && require;\n        if (!u && a) return a(o, !0);\n        if (i) return i(o, !0);\n        var f = new Error(\"Cannot find module '\" + o + \"'\");\n        throw f.code = \"MODULE_NOT_FOUND\", f;\n      }\n\n      var l = n[o] = {\n        exports: {}\n      };\n      t[o][0].call(l.exports, function (e) {\n        var n = t[o][1][e];\n        return s(n ? n : e);\n      }, l, l.exports, e, t, n, r);\n    }\n\n    return n[o].exports;\n  }\n\n  var i = typeof require == \"function\" && require;\n\n  for (var o = 0; o < r.length; o++) {\n    s(r[o]);\n  }\n\n  return s;\n})({\n  1: [function (require, module, exports) {\n    // Polyfill for creating CustomEvents on IE9/10/11\n    // code pulled from:\n    // https://github.com/d4tocchini/customevent-polyfill\n    // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n    try {\n      var ce = new window.CustomEvent('test');\n      ce.preventDefault();\n\n      if (ce.defaultPrevented !== true) {\n        // IE has problems with .preventDefault() on custom events\n        // http://stackoverflow.com/questions/23349191\n        throw new Error('Could not prevent default');\n      }\n    } catch (e) {\n      var CustomEvent = function CustomEvent(event, params) {\n        var evt, origPrevent;\n        params = params || {\n          bubbles: false,\n          cancelable: false,\n          detail: undefined\n        };\n        evt = document.createEvent(\"CustomEvent\");\n        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n        origPrevent = evt.preventDefault;\n\n        evt.preventDefault = function () {\n          origPrevent.call(this);\n\n          try {\n            Object.defineProperty(this, 'defaultPrevented', {\n              get: function get() {\n                return true;\n              }\n            });\n          } catch (e) {\n            this.defaultPrevented = true;\n          }\n        };\n\n        return evt;\n      };\n\n      CustomEvent.prototype = window.Event.prototype;\n      window.CustomEvent = CustomEvent; // expose definition to window\n    }\n  }, {}],\n  2: [function (require, module, exports) {\n    /**\n     * Code refactored from Mozilla Developer Network:\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n     */\n    'use strict';\n\n    function assign(target, firstSource) {\n      if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert first argument to object');\n      }\n\n      var to = Object(target);\n\n      for (var i = 1; i < arguments.length; i++) {\n        var nextSource = arguments[i];\n\n        if (nextSource === undefined || nextSource === null) {\n          continue;\n        }\n\n        var keysArray = Object.keys(Object(nextSource));\n\n        for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n          var nextKey = keysArray[nextIndex];\n          var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n\n          if (desc !== undefined && desc.enumerable) {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n\n      return to;\n    }\n\n    function polyfill() {\n      if (!Object.assign) {\n        Object.defineProperty(Object, 'assign', {\n          enumerable: false,\n          configurable: true,\n          writable: true,\n          value: assign\n        });\n      }\n    }\n\n    module.exports = {\n      assign: assign,\n      polyfill: polyfill\n    };\n  }, {}],\n  3: [function (require, module, exports) {\n    'use strict';\n\n    var ModalVideo = require('../index');\n\n    var applyJQuery = function applyJQuery(jQuery) {\n      jQuery.fn.modalVideo = function (settings) {\n        if (typeof settings === 'strings') {} else {\n          new ModalVideo(this, settings);\n        }\n\n        return this;\n      };\n    };\n\n    if (typeof define === 'function' && define.amd) {\n      define(['jquery'], applyJQuery);\n    } else {\n      var jq = window.jQuery ? window.jQuery : window.$;\n\n      if (typeof jq !== 'undefined') {\n        applyJQuery(jq);\n      }\n    }\n\n    module.exports = applyJQuery;\n  }, {\n    \"../index\": 5\n  }],\n  4: [function (require, module, exports) {\n    'use strict';\n\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n\n    var _createClass = function () {\n      function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n          var descriptor = props[i];\n          descriptor.enumerable = descriptor.enumerable || false;\n          descriptor.configurable = true;\n          if (\"value\" in descriptor) descriptor.writable = true;\n          Object.defineProperty(target, descriptor.key, descriptor);\n        }\n      }\n\n      return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) defineProperties(Constructor, staticProps);\n        return Constructor;\n      };\n    }();\n\n    require('custom-event-polyfill');\n\n    var _util = require('../lib/util');\n\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n\n    var assign = require('es6-object-assign').assign;\n\n    var defaults = {\n      channel: 'youtube',\n      facebook: {},\n      youtube: {\n        autoplay: 1,\n        cc_load_policy: 1,\n        color: null,\n        controls: 1,\n        disablekb: 0,\n        enablejsapi: 0,\n        end: null,\n        fs: 1,\n        h1: null,\n        iv_load_policy: 1,\n        list: null,\n        listType: null,\n        loop: 0,\n        modestbranding: null,\n        origin: null,\n        playlist: null,\n        playsinline: null,\n        rel: 0,\n        showinfo: 1,\n        start: 0,\n        wmode: 'transparent',\n        theme: 'dark',\n        nocookie: false\n      },\n      ratio: '16:9',\n      vimeo: {\n        api: false,\n        autopause: true,\n        autoplay: true,\n        byline: true,\n        callback: null,\n        color: null,\n        height: null,\n        loop: false,\n        maxheight: null,\n        maxwidth: null,\n        player_id: null,\n        portrait: true,\n        title: true,\n        width: null,\n        xhtml: false\n      },\n      allowFullScreen: true,\n      animationSpeed: 300,\n      classNames: {\n        modalVideo: 'modal-video',\n        modalVideoClose: 'modal-video-close',\n        modalVideoBody: 'modal-video-body',\n        modalVideoInner: 'modal-video-inner',\n        modalVideoIframeWrap: 'modal-video-movie-wrap',\n        modalVideoCloseBtn: 'modal-video-close-btn'\n      },\n      aria: {\n        openMessage: 'You just openned the modal video',\n        dismissBtnMessage: 'Close the modal by clicking here'\n      }\n    };\n\n    var ModalVideo = function () {\n      function ModalVideo(ele, option) {\n        var _this = this;\n\n        _classCallCheck(this, ModalVideo);\n\n        var opt = assign({}, defaults, option);\n        var selectors = typeof ele === 'string' ? document.querySelectorAll(ele) : ele;\n        var body = document.querySelector('body');\n        var classNames = opt.classNames;\n        var speed = opt.animationSpeed;\n        [].forEach.call(selectors, function (selector) {\n          selector.addEventListener('click', function (event) {\n            if (selector.tagName === 'A') {\n              event.preventDefault();\n            }\n\n            var videoId = selector.dataset.videoId;\n            var channel = selector.dataset.channel || opt.channel;\n            var id = (0, _util.getUniqId)();\n\n            var videoUrl = selector.dataset.videoUrl || _this.getVideoUrl(opt, channel, videoId);\n\n            var html = _this.getHtml(opt, videoUrl, id);\n\n            (0, _util.append)(body, html);\n            var modal = document.getElementById(id);\n            var btn = modal.querySelector('.js-modal-video-dismiss-btn');\n            modal.focus();\n            modal.addEventListener('click', function () {\n              (0, _util.addClass)(modal, classNames.modalVideoClose);\n              setTimeout(function () {\n                (0, _util.remove)(modal);\n                selector.focus();\n              }, speed);\n            });\n            modal.addEventListener('keydown', function (e) {\n              if (e.which === 9) {\n                e.preventDefault();\n\n                if (document.activeElement === modal) {\n                  btn.focus();\n                } else {\n                  modal.setAttribute('aria-label', '');\n                  modal.focus();\n                }\n              }\n            });\n            btn.addEventListener('click', function () {\n              (0, _util.triggerEvent)(modal, 'click');\n            });\n          });\n        });\n      }\n\n      _createClass(ModalVideo, [{\n        key: 'getPadding',\n        value: function getPadding(ratio) {\n          var arr = ratio.split(':');\n          var width = Number(arr[0]);\n          var height = Number(arr[1]);\n          var padding = height * 100 / width;\n          return padding + '%';\n        }\n      }, {\n        key: 'getQueryString',\n        value: function getQueryString(obj) {\n          var url = '';\n          Object.keys(obj).forEach(function (key) {\n            url += key + '=' + obj[key] + '&';\n          });\n          return url.substr(0, url.length - 1);\n        }\n      }, {\n        key: 'getVideoUrl',\n        value: function getVideoUrl(opt, channel, videoId) {\n          if (channel === 'youtube') {\n            return this.getYoutubeUrl(opt.youtube, videoId);\n          } else if (channel === 'vimeo') {\n            return this.getVimeoUrl(opt.vimeo, videoId);\n          } else if (channel === 'facebook') {\n            return this.getFacebookUrl(opt.facebook, videoId);\n          }\n\n          return '';\n        }\n      }, {\n        key: 'getVimeoUrl',\n        value: function getVimeoUrl(vimeo, videoId) {\n          var query = this.getQueryString(vimeo);\n          return '//player.vimeo.com/video/' + videoId + '?' + query;\n        }\n      }, {\n        key: 'getYoutubeUrl',\n        value: function getYoutubeUrl(youtube, videoId) {\n          var query = this.getQueryString(youtube);\n\n          if (youtube.nocookie === true) {\n            return '//www.youtube-nocookie.com/embed/' + videoId + '?' + query;\n          }\n\n          return '//www.youtube.com/embed/' + videoId + '?' + query;\n        }\n      }, {\n        key: 'getFacebookUrl',\n        value: function getFacebookUrl(facebook, videoId) {\n          return '//www.facebook.com/v2.10/plugins/video.php?href=https://www.facebook.com/facebook/videos/' + videoId + '&' + this.getQueryString(facebook);\n        }\n      }, {\n        key: 'getHtml',\n        value: function getHtml(opt, videoUrl, id) {\n          var padding = this.getPadding(opt.ratio);\n          var classNames = opt.classNames;\n          return '\\n      <div class=\"' + classNames.modalVideo + '\" tabindex=\"-1\" role=\"dialog\" aria-label=\"' + opt.aria.openMessage + '\" id=\"' + id + '\">\\n        <div class=\"' + classNames.modalVideoBody + '\">\\n          <div class=\"' + classNames.modalVideoInner + '\">\\n            <div class=\"' + classNames.modalVideoIframeWrap + '\" style=\"padding-bottom:' + padding + '\">\\n              <button class=\"' + classNames.modalVideoCloseBtn + ' js-modal-video-dismiss-btn\" aria-label=\"' + opt.aria.dismissBtnMessage + '\"></button>\\n              <iframe width=\\'460\\' height=\\'230\\' src=\"' + videoUrl + '\" frameborder=\\'0\\' allowfullscreen=' + opt.allowFullScreen + ' tabindex=\"-1\"/>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    ';\n        }\n      }]);\n\n      return ModalVideo;\n    }();\n\n    exports.default = ModalVideo;\n    module.exports = exports['default'];\n  }, {\n    \"../lib/util\": 6,\n    \"custom-event-polyfill\": 1,\n    \"es6-object-assign\": 2\n  }],\n  5: [function (require, module, exports) {\n    'use strict';\n\n    module.exports = require('./core/');\n  }, {\n    \"./core/\": 4\n  }],\n  6: [function (require, module, exports) {\n    'use strict';\n\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n\n    var append = exports.append = function append(element, string) {\n      var div = document.createElement('div');\n      div.innerHTML = string;\n\n      while (div.children.length > 0) {\n        element.appendChild(div.children[0]);\n      }\n    };\n\n    var getUniqId = exports.getUniqId = function getUniqId() {\n      return (Date.now().toString(36) + Math.random().toString(36).substr(2, 5)).toUpperCase();\n    };\n\n    var remove = exports.remove = function remove(element) {\n      if (element && element.parentNode) {\n        element.parentNode.removeChild(element);\n      }\n    };\n\n    var addClass = exports.addClass = function addClass(element, className) {\n      if (element.classList) {\n        element.classList.add(className);\n      } else {\n        element.className += ' ' + className;\n      }\n    };\n\n    var triggerEvent = exports.triggerEvent = function triggerEvent(el, eventName, options) {\n      var event = void 0;\n\n      if (window.CustomEvent) {\n        event = new CustomEvent(eventName, {\n          cancelable: true\n        });\n      } else {\n        event = document.createEvent('CustomEvent');\n        event.initCustomEvent(eventName, false, false, options);\n      }\n\n      el.dispatchEvent(event);\n    };\n  }, {}]\n}, {}, [3]);","map":null,"metadata":{},"sourceType":"script"}