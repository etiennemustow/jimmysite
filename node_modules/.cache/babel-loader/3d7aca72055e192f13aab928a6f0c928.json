{"ast":null,"code":"import _slicedToArray from \"/Users/etiennemustow/Projects/jimmysite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/etiennemustow/Projects/jimmysite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/etiennemustow/Projects/jimmysite/src/components/Plane.js\";\nimport React, { forwardRef, useRef } from \"react\";\nimport { useFrame } from \"react-three-fiber\";\nimport lerp from \"lerp\";\nimport \"./CustomMaterial\";\nimport { useBlock } from \"../blocks\";\nimport state from \"../store\";\nvar Plane = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? \"white\" : _ref$color,\n      _ref$shift = _ref.shift,\n      shift = _ref$shift === void 0 ? 1 : _ref$shift,\n      _ref$opacity = _ref.opacity,\n      opacity = _ref$opacity === void 0 ? 1 : _ref$opacity,\n      args = _ref.args,\n      map = _ref.map,\n      props = _objectWithoutProperties(_ref, [\"color\", \"shift\", \"opacity\", \"args\", \"map\"]);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isOpen = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useBlock = useBlock(),\n      viewportHeight = _useBlock.viewportHeight,\n      offsetFactor = _useBlock.offsetFactor;\n\n  var material = useRef();\n  var last = state.top.current;\n  useFrame(function () {\n    var pages = state.pages,\n        top = state.top;\n    material.current.scale = lerp(material.current.scale, offsetFactor - top.current / ((pages - 1) * viewportHeight), 0.1);\n    material.current.shift = lerp(material.current.shift, (top.current - last) / shift, 0.1);\n    last = top.current;\n  });\n  return React.createElement(\"mesh\", Object.assign({\n    ref: ref\n  }, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }), React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: args,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }), React.createElement(\"customMaterial\", {\n    onClick: function onClick() {\n      return setOpen(true);\n    },\n    ref: material,\n    attach: \"material\",\n    color: color,\n    map: map,\n    transparent: true,\n    opacity: opacity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }));\n});\nexport default Plane;","map":{"version":3,"sources":["/Users/etiennemustow/Projects/jimmysite/src/components/Plane.js"],"names":["React","forwardRef","useRef","useFrame","lerp","useBlock","state","Plane","ref","color","shift","opacity","args","map","props","useState","isOpen","setOpen","viewportHeight","offsetFactor","material","last","top","current","pages","scale"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,MAA5B,QAA0C,OAA1C;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAO,kBAAP;AACA,SAASC,QAAT,QAAyB,WAAzB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAEA,IAAMC,KAAK,GAAGN,UAAU,CAAC,gBAAmEO,GAAnE,EAA2E;AAAA,wBAAxEC,KAAwE;AAAA,MAAxEA,KAAwE,2BAAhE,OAAgE;AAAA,wBAAvDC,KAAuD;AAAA,MAAvDA,KAAuD,2BAA/C,CAA+C;AAAA,0BAA5CC,OAA4C;AAAA,MAA5CA,OAA4C,6BAAlC,CAAkC;AAAA,MAA/BC,IAA+B,QAA/BA,IAA+B;AAAA,MAAzBC,GAAyB,QAAzBA,GAAyB;AAAA,MAAjBC,KAAiB;;AAAA,kBACxEC,QAAQ,CAAC,KAAD,CADgE;AAAA;AAAA,MAC3FC,MAD2F;AAAA,MACnFC,OADmF;;AAAA,kBAGzDZ,QAAQ,EAHiD;AAAA,MAG1Fa,cAH0F,aAG1FA,cAH0F;AAAA,MAG1EC,YAH0E,aAG1EA,YAH0E;;AAIlG,MAAMC,QAAQ,GAAGlB,MAAM,EAAvB;AACA,MAAImB,IAAI,GAAGf,KAAK,CAACgB,GAAN,CAAUC,OAArB;AACApB,EAAAA,QAAQ,CAAC,YAAM;AAAA,QACLqB,KADK,GACUlB,KADV,CACLkB,KADK;AAAA,QACEF,GADF,GACUhB,KADV,CACEgB,GADF;AAEbF,IAAAA,QAAQ,CAACG,OAAT,CAAiBE,KAAjB,GAAyBrB,IAAI,CAACgB,QAAQ,CAACG,OAAT,CAAiBE,KAAlB,EAAyBN,YAAY,GAAGG,GAAG,CAACC,OAAJ,IAAe,CAACC,KAAK,GAAG,CAAT,IAAcN,cAA7B,CAAxC,EAAsF,GAAtF,CAA7B;AACAE,IAAAA,QAAQ,CAACG,OAAT,CAAiBb,KAAjB,GAAyBN,IAAI,CAACgB,QAAQ,CAACG,OAAT,CAAiBb,KAAlB,EAAyB,CAACY,GAAG,CAACC,OAAJ,GAAcF,IAAf,IAAuBX,KAAhD,EAAuD,GAAvD,CAA7B;AACAW,IAAAA,IAAI,GAAGC,GAAG,CAACC,OAAX;AACD,GALO,CAAR;AAMA,SACE;AAAM,IAAA,GAAG,EAAEf;AAAX,KAAoBM,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MACE;AAAqB,IAAA,MAAM,EAAC,UAA5B;AAAuC,IAAA,IAAI,EAAEF,IAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAgB,IAAA,OAAO,EAAE;AAAA,aAAKK,OAAO,CAAC,IAAD,CAAZ;AAAA,KAAzB;AAA6C,IAAA,GAAG,EAAEG,QAAlD;AAA4D,IAAA,MAAM,EAAC,UAAnE;AAA8E,IAAA,KAAK,EAAEX,KAArF;AAA4F,IAAA,GAAG,EAAEI,GAAjG;AAAsG,IAAA,WAAW,MAAjH;AAAkH,IAAA,OAAO,EAAEF,OAA3H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF;AAMD,CAlBuB,CAAxB;AAoBA,eAAeJ,KAAf","sourcesContent":["import React, { forwardRef, useRef } from \"react\"\nimport { useFrame } from \"react-three-fiber\"\nimport lerp from \"lerp\"\nimport \"./CustomMaterial\"\nimport { useBlock } from \"../blocks\"\nimport state from \"../store\"\n\nconst Plane = forwardRef(({ color = \"white\", shift = 1, opacity = 1, args, map, ...props }, ref) => {\n  const [isOpen, setOpen] = useState(false)\n\n  const { viewportHeight, offsetFactor } = useBlock()\n  const material = useRef()\n  let last = state.top.current\n  useFrame(() => {\n    const { pages, top } = state\n    material.current.scale = lerp(material.current.scale, offsetFactor - top.current / ((pages - 1) * viewportHeight), 0.1)\n    material.current.shift = lerp(material.current.shift, (top.current - last) / shift, 0.1)\n    last = top.current\n  })\n  return (\n    <mesh ref={ref} {...props}>\n      <planeBufferGeometry attach=\"geometry\" args={args} />\n      <customMaterial onClick={()=> setOpen(true)} ref={material} attach=\"material\" color={color} map={map} transparent opacity={opacity} />\n    </mesh>\n  )\n})\n\nexport default Plane\n"]},"metadata":{},"sourceType":"module"}